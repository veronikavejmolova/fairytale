Index: fairy/main.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from fastapi import FastAPI, Request, Form\r\nfrom fastapi.responses import HTMLResponse\r\nfrom starlette.templating import Jinja2Templates\r\nfrom fairy.llm.generator import generate\r\nimport uvicorn\r\nfrom pathlib import Path\r\n\r\napp = FastAPI()\r\nTEMPLATES_DIR = Path(__file__).parent / \"frontend\"\r\ntemplates = Jinja2Templates(directory=TEMPLATES_DIR)\r\n\r\n# Step 1: theme\r\n@app.get(\"/\", response_class=HTMLResponse)\r\nasync def step1(request: Request):\r\n    return templates.TemplateResponse(\"step1.html\", {\"request\": request})\r\n\r\n# Step 2: character\r\n@app.post(\"/step2\", response_class=HTMLResponse)\r\nasync def step2(request: Request, theme: str = Form(...)):\r\n    return templates.TemplateResponse(\"step2.html\", {\"request\": request, \"theme\": theme})\r\n\r\n# Step 3: moral\r\n@app.post(\"/step3\", response_class=HTMLResponse)\r\nasync def step3(request: Request, theme: str = Form(...), character: str = Form(...)):\r\n    return templates.TemplateResponse(\"step3.html\", {\"request\": request, \"theme\": theme, \"character\": character})\r\n\r\n# Result 4: generate story\r\n@app.post(\"/generate\", response_class=HTMLResponse)\r\nasync def generate_story(\r\n    request: Request,\r\n    theme: str = Form(...),\r\n    character: str = Form(...),\r\n    moral: str = Form(...),\r\n    prompt: str = Form(\"\")\r\n):\r\n    prompt_text = f\"Napiš pohádku, téma: {theme}, postava: {character}, ponaučení: {moral}, další: {prompt}\"\r\n    story = generate(prompt_text)\r\n    return templates.TemplateResponse(\"result.html\", {\"request\": request, \"story\": story})\r\n\r\nif __name__ == \"__main__\":\r\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/fairy/main.py b/fairy/main.py
--- a/fairy/main.py	(revision 70176186729bc0cf8dbc596d9095eaf979929737)
+++ b/fairy/main.py	(date 1760869042393)
@@ -38,4 +38,4 @@
     return templates.TemplateResponse("result.html", {"request": request, "story": story})
 
 if __name__ == "__main__":
-    uvicorn.run(app, host="0.0.0.0", port=8000)
\ No newline at end of file
+    uvicorn.run(app, host="0.0.0.0", port=8001)
\ No newline at end of file
Index: fairy/frontend/index.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\r\n<html lang=\"cs\">\r\n<head>\r\n  <meta charset=\"UTF-8\" />\r\n  <title>Generátor pohádek</title>\r\n  <style>\r\n    body { font-family: 'Georgia', serif; max-width: 600px; margin: 2rem auto; }\r\n    textarea { width: 100%; height: 100px; margin: 1rem 0; }\r\n    button { padding: 0.5rem 1rem; cursor: pointer; }\r\n    #story {\r\n      white-space: pre-wrap;\r\n      margin-top: 1rem;\r\n      min-height: 50px;\r\n    }\r\n    #loading {\r\n      font-style: italic;\r\n      color: #666;\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <h1>\uD83E\uDDDA\u200D♂\uFE0F Generátor pohádek</h1>\r\n\r\n  <label for=\"prompt\">Zadej téma pohádky:</label>\r\n  <textarea id=\"prompt\" placeholder=\"Např. princ a drak...\"></textarea>\r\n  <button onclick=\"generateStory()\">Vygenerovat</button>\r\n\r\n  <div id=\"story\"></div>\r\n\r\n  <script>\r\n    async function generateStory() {\r\n      const prompt = document.getElementById(\"prompt\").value;\r\n      const storyDiv = document.getElementById(\"story\");\r\n\r\n\r\n      storyDiv.innerHTML = `<span id=\"loading\">✨ Kouzlíme pohádku...</span>`;\r\n\r\n      try {\r\n        const res = await fetch(\"http://localhost:8000/?prompt=\" + encodeURIComponent(prompt));\r\n        const data = await res.json();\r\n\r\n\r\n        storyDiv.textContent = data.message;\r\n      } catch (err) {\r\n        storyDiv.innerHTML = \"❌ Nepodařilo se načíst pohádku. Zkontroluj backend.\";\r\n      }\r\n    }\r\n  </script>\r\n</body>\r\n</html>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/fairy/frontend/index.html b/fairy/frontend/index.html
--- a/fairy/frontend/index.html	(revision 70176186729bc0cf8dbc596d9095eaf979929737)
+++ b/fairy/frontend/index.html	(date 1760440452945)
@@ -10,7 +10,7 @@
     #story {
       white-space: pre-wrap;
       margin-top: 1rem;
-      min-height: 50px;
+      min-height: 50px;git
     }
     #loading {
       font-style: italic;
